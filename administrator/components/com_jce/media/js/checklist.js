(function($){$.fn.checkList=function(options){this.each(function(){return $.CheckList.init(this,options)})};$.CheckList={options:{valueAsClassName:false},init:function(el,options){var t=this;$.extend(this.options,options);var ul=document.createElement('ul');var elms=[];if(el.nodeName=='SELECT'){$.each(el.options,function(n,o){elms.push({name:o.innerHTML,value:o.value,selected:o.selected})})}else{$.each(el.value.split(','),function(){elms.push({name:this,value:this})})}$(el).hide();$(ul).addClass('widget-checklist').insertBefore(el);$.each(elms,function(){t.createElement(el,ul,this)});if($(el).hasClass('sortable')){$(ul).addClass('sortable').sortable({axis:'y',tolerance:'intersect',update:function(event,ui){t.setValue(el,$(ui.item).parent())}}).disableSelection()}},createElement:function(el,ul,n){var t=this,d=document,v,s,li=d.createElement('li'),label=d.createElement('label'),check=d.createElement('span');$(li).attr({title:n.value}).addClass('ui-widget-content ui-corner-all').appendTo(ul);$(li).addClass(v);$(check).addClass('checkbox').addClass(function(){return n.selected?'checked':''}).click(function(){$(this).toggleClass('checked');t.setValue(el,ul)}).appendTo(li);$(li).append('<span>'+n.name+'</span>')},setValue:function(el,ul){var x=$.map($(ul).find('li span.checked'),function(n){return $(n).parent('li').attr('title')});if(el.nodeName=='SELECT'){$(el).children('option').attr('selected',false);$.each(x,function(i,v){$(el).children('option[value='+v+']').attr('selected',true)})}else{el.value=x.join(',')}}}})(jQuery);